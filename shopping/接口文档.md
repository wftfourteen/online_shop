## 1. 用户认证模块

### 1.1 用户注册

#### 1.1.1**基本信息**

**请求路径**： `/register`
**请求方式**： `POST`
**接口描述**： 用户注册接口，完成新用户账号创建



#### 1.1.2**请求参数**

**参数格式**： `application/json`

**参数说明：**

| 参数名   | 类型   | 是否必须 | 备注                                  |
| :------- | :----- | :------- | :------------------------------------ |
| username | string | 必须     | 用户名，不能使用@符号~~，3-20位字符~~ |
| email    | string | 必须     | 邮箱地址                              |
| password | string | 必须     | 密码~~，8-20位字符~~                  |
| avatar   | string | 非必须   | 头像url                               |
| role     | number | 必须     | 角色，1顾客；2商家                    |

**请求参数样例：**

```json
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123",
  "role":1
}
```



#### 1.1.3**响应数据**

**参数格式**： `application/json`

**参数说明：**

| 参数名 | 类型   | 是否必须 | 备注                 |
| :----- | :----- | :------- | :------------------- |
| code   | number | 必须     | 响应码，1成功，0失败 |
| msg    | string | 非必须   | 提示信息             |
| data   | object | 非必须   | 返回数据             |

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```



**错误响应样例：**

```json
{
  "code": 0,
  "msg": "用户名已存在",
  "data": null
}
```



------

### 1.2 用户名验证接口

#### 1.2.1 基本信息

**请求路径：** `/register/check-username`
**请求方式：** `GET`
**接口描述：** 实时校验用户名是否可用



#### 1.2.2 请求参数

**参数格式：** `Query Parameters`

**参数说明：**

| 参数名   | 类型   | 是否必须 | 备注           |
| :------- | :----- | :------- | :------------- |
| username | string | 必须     | 要验证的用户名 |

**请求参数样例：**

```
/register/check-username?username=testuser
```



#### 1.2.3 响应数据

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```



```json
{
  "code": 0,
  "msg": "用户名已存在",
  "data": null
}
```



------

### 1.3 邮箱验证接口

#### 1.3.1 基本信息

**请求路径：** `/register/check-email`
**请求方式：** `GET`
**接口描述：** 实时校验邮箱是否可用



#### 1.3.2 请求参数

**参数格式：** `Query Parameters`

**参数说明：**

| 参数名 | 类型   | 是否必须 | 备注         |
| :----- | :----- | :------- | :----------- |
| email  | string | 必须     | 要验证的邮箱 |

**请求参数样例：**

```
/register/check-email?email=test@example.com
```



#### 1.3.3 响应数据

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}

{
  "code": 0,
  "msg": "邮箱已注册",
  "data": null
}
```



------

### 1.4 用户登录接口

#### 1.4.1 基本信息

**请求路径：** `/login`
**请求方式：** `POST`
**接口描述：** 用户登录接口，支持用户名或邮箱登录



#### 1.4.2 请求参数

**参数格式：** `application/json`

**参数说明：**

| 参数名   | 类型   | 是否必须 | 备注         |
| :------- | :----- | :------- | :----------- |
| account  | string | 必须     | 用户名或邮箱 |
| password | string | 必须     | 密码         |

**请求参数样例：**

```json
{
  "account": "testuser",
  "password": "password123"
}
```



#### 1.4.3 响应数据

**参数格式：** `application/json`

**参数说明：**

| 名称         | 类型   | 是否必须 | 备注                    |
| ------------ | ------ | -------- | ----------------------- |
| code         | number | 必须     | 响应码, 1 成功 ; 0 失败 |
| msg          | string | 非必须   | 提示信息                |
| data         | object | 必须     | 返回的数据              |
| \|- userId   | number | 必须     | 用户ID                  |
| \|- username | string | 必须     | 用户名                  |
| \|- role     | number | 必须     | 用户角色，1顾客；2商家  |
| \|- avatar   | string | 必须     | 头像                    |
| \|- token    | string | 必须     | 令牌                    |

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "userId": 1,
    "username": "testuser",
    "role": 1,
    "avatar": "/avatars/default-avatar.png",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```



**错误响应样例：**

```json
{
  "code": 0,
  "msg": "账号或密码不正确",
  "data": null
}
```



------

### 1.5 获取用户信息接口

#### 1.5.1 基本信息

**请求路径：** `/user`
**请求方式：** `GET`
**接口描述：** 获取当前登录用户的个人信息
**认证要求：** 需要JWT Token



#### 1.5.2 请求参数

无



#### 1.5.3 响应数据

**参数格式：** `application/json`

**参数说明：**

| 名称         | 类型   | 是否必须 | 备注                    |
| ------------ | ------ | -------- | ----------------------- |
| code         | number | 必须     | 响应码, 1 成功 ; 0 失败 |
| msg          | string | 非必须   | 提示信息                |
| data         | object | 必须     | 返回的数据              |
| \|- userId   | number | 必须     | 用户ID                  |
| \|- username | string | 必须     | 用户名                  |
| \|- email    | string | 必须     | 邮箱                    |
| \|- avatar   | string | 必须     | 头像                    |
| \|- role     | number | 必须     | 用户角色，1顾客；2商家  |
| \|- status   | number | 必须     | 状态，1正常；0禁用      |

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "userId": 1,
    "username": "testuser",
    "email": "test@example.com",
    "avatar": "/avatars/testuser.jpg",
    "role": 1,
    "status": 1
  }
}
```



------

### 1.6 更新用户信息接口

#### 1.6.1 基本信息

**请求路径：** `/user`
**请求方式：** `PUT`
**接口描述：** 更新用户个人信息
**认证要求：** 需要JWT Token



#### 1.6.2 请求参数

**参数格式：** `application/json`

**参数说明：**

| 参数名   | 类型   | 是否必须 | 备注   |
| :------- | :----- | :------- | :----- |
| username | string | 非必须   | 用户名 |

**请求参数样例：**

```json
{
  "username": "newname"
}
```



#### 1.6.3 响应数据

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```



------

### 1.7 头像上传接口

#### 1.7.1 基本信息

**请求路径：** `/user/avatar`
**请求方式：** `POST`
**接口描述：** 上传用户头像
**认证要求：** 需要JWT Token



#### 1.7.2 请求参数

**参数格式：** `multipart/form-data`

**参数说明：**

| 参数名 | 类型 | 是否必须 | 备注                        |
| :----- | :--- | :------- | :-------------------------- |
| avatar | file | 必须     | 头像文件，支持JPG/PNG，≤5MB |



#### 1.7.3 响应数据

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "头像上传成功",
  "data": {
    "avatarUrl": "/avatars/12345.jpg"
  }
}
```



------

### 1.8 退出登录接口

#### 1.8.1 基本信息

**请求路径：** `/user/logout`
**请求方式：** `POST`
**接口描述：** 用户退出登录
**认证要求：** 需要JWT Token



#### 1.8.2 请求参数

无



#### 1.8.3 响应数据

**响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```