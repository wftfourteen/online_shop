### 1. 用户表（user）

| 字段名     | 类型     | 长度 | 允许空 | 默认值                | 备注               |
| :--------- | :------- | :--- | :----- | :-------------------- | :----------------- |
| user_id    | INT      | -    | ❌      | AUTO_INCREMENT        | 主键，用户唯一标识 |
| username   | VARCHAR  | 20   | ❌      | -                     | 用户名，唯一       |
| email      | VARCHAR  | 50   | ❌      | -                     | 邮箱，唯一         |
| password   | VARCHAR  | 64   | ❌      | -                     | 加密密码（bcrypt） |
| role       | TINYINT  | 1    | ❌      | 1                     | 角色：1顾客 2商家  |
| avatar     | VARCHAR  | 255  | ✅      | '/default-avatar.png' | 头像URL            |
| status     | TINYINT  | 1    | ❌      | 1                     | 状态：1正常 0禁用  |
| created_at | DATETIME | -    | ❌      | CURRENT_TIMESTAMP     | 创建时间           |
| updated_at | DATETIME | -    | ❌      | CURRENT_TIMESTAMP     | 更新时间           |

**索引：**

- 主键：user_id
- 唯一索引：username, email
- 普通索引：role, status

**常量映射：**

```javascript
// 用户角色
USER_ROLES = {
    CUSTOMER: 1,    // 顾客
    BUSINESS: 2     // 商家
}

// 用户状态  
USER_STATUS = {
    ACTIVE: 1,      // 正常
    DISABLED: 0     // 禁用
}
```



------

### 2. 分类表（categories）

| 字段名      | 类型     | 长度 | 允许空 | 默认值            | 备注                            |
| :---------- | :------- | :--- | :----- | :---------------- | :------------------------------ |
| category_id | INT      | -    | ❌      | AUTO_INCREMENT    | 主键，分类唯一标识              |
| name        | VARCHAR  | 50   | ❌      | -                 | 分类名称                        |
| parent_id   | INT      | -    | ✅      | NULL              | 父级分类ID，关联本表category_id |
| sort_order  | INT      | -    | ❌      | 0                 | 排序序号                        |
| status      | TINYINT  | 1    | ❌      | 1                 | 状态：1启用 0禁用               |
| created_at  | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 创建时间                        |

**索引：**

- 主键：category_id
- 普通索引：parent_id, status

**常量映射：**

```javascript
// 分类状态
CATEGORY_STATUS = {
    ENABLED: 1,     // 启用
    DISABLED: 0     // 禁用
}
```



------

### 3. 商品表（products）

| 字段名        | 类型     | 长度 | 允许空 | 默认值            | 备注                               |
| :------------ | :------- | :--- | :----- | :---------------- | :--------------------------------- |
| product_id    | INT      | -    | ❌      | AUTO_INCREMENT    | 主键，商品唯一标识                 |
| name          | VARCHAR  | 100  | ❌      | -                 | 商品名称                           |
| category_id   | INT      | -    | ❌      | -                 | 分类ID，关联categories.category_id |
| price         | DECIMAL  | 10,2 | ❌      | -                 | 商品价格                           |
| stock         | INT      | -    | ❌      | 0                 | 库存数量                           |
| main_image    | VARCHAR  | 255  | ❌      | -                 | 商品主图URL                        |
| detail_images | TEXT     | -    | ✅      | NULL              | 商品详情图URL（JSON数组格式）      |
| description   | TEXT     | -    | ✅      | NULL              | 商品描述                           |
| status        | TINYINT  | 1    | ❌      | 1                 | 状态：1上架 0下架                  |
| created_at    | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 创建时间                           |
| updated_at    | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 更新时间                           |

**索引：**

- 主键：product_id
- 普通索引：category_id, status, price
- 全文索引：name (用于搜索)

**常量映射：**

```javascript
// 商品状态
PRODUCT_STATUS = {
    LISTED: 1,      // 上架
    UNLISTED: 0     // 下架
}
```



------

### 4. 用户地址表（user_addresses）

| 字段名         | 类型     | 长度 | 允许空 | 默认值            | 备注                      |
| :------------- | :------- | :--- | :----- | :---------------- | :------------------------ |
| address_id     | INT      | -    | ❌      | AUTO_INCREMENT    | 主键，地址唯一标识        |
| user_id        | INT      | -    | ❌      | -                 | 用户ID，关联users.user_id |
| receiver_name  | VARCHAR  | 50   | ❌      | -                 | 收货人姓名                |
| receiver_phone | VARCHAR  | 20   | ❌      | -                 | 收货人电话                |
| province       | VARCHAR  | 50   | ❌      | -                 | 省份                      |
| city           | VARCHAR  | 50   | ❌      | -                 | 城市                      |
| district       | VARCHAR  | 50   | ❌      | -                 | 区县                      |
| detail_address | VARCHAR  | 255  | ❌      | -                 | 详细地址                  |
| created_at     | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 创建时间                  |

**索引：**

- 主键：address_id
- 普通索引：user_id, 



------

### 5. 购物车表（shopping_carts）

| 字段名     | 类型     | 长度 | 允许空 | 默认值            | 备注                            |
| :--------- | :------- | :--- | :----- | :---------------- | :------------------------------ |
| cart_id    | INT      | -    | ❌      | AUTO_INCREMENT    | 主键，购物车记录ID              |
| user_id    | INT      | -    | ❌      | -                 | 用户ID，关联users.user_id       |
| product_id | INT      | -    | ❌      | -                 | 商品ID，关联products.product_id |
| quantity   | INT      | -    | ❌      | 1                 | 商品数量                        |
| created_at | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 添加时间                        |

**索引：**

- 主键：cart_id
- 唯一索引：user_id, product_id (防止重复添加)
- 普通索引：user_id

------

### 6. 订单表（orders）

| 字段名       | 类型     | 长度 | 允许空 | 默认值            | 备注                                          |
| :----------- | :------- | :--- | :----- | :---------------- | :-------------------------------------------- |
| order_id     | INT      | -    | ❌      | AUTO_INCREMENT    | 主键，订单唯一标识                            |
| user_id      | INT      | -    | ❌      | -                 | 用户ID，关联users.user_id                     |
| total_amount | DECIMAL  | 10,2 | ❌      | -                 | 订单总金额                                    |
| status       | TINYINT  | 1    | ❌      | 1                 | 状态：1待支付 2已支付 3已发货 4已完成 5已取消 |
| address_id   | INT      | -    | ❌      | -                 | 收货地址ID，关联user_addresses.address_id     |
| remark       | VARCHAR  | 200  | ✅      | NULL              | 订单备注                                      |
| created_at   | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 创建时间                                      |
| updated_at   | DATETIME | -    | ❌      | CURRENT_TIMESTAMP | 更新时间                                      |

**索引：**

- 主键：order_id
- 普通索引：user_id, status, created_at

**常量映射：**

javascript

```
// 订单状态
ORDER_STATUS = {
    PENDING: 1,     // 待支付
    PAID: 2,        // 已支付
    SHIPPED: 3,     // 已发货
    COMPLETED: 4,   // 已完成
    CANCELLED: 5    // 已取消
}
```



------

### 7. 订单商品表（order_items）

| 字段名        | 类型    | 长度 | 允许空 | 默认值         | 备注                            |
| :------------ | :------ | :--- | :----- | :------------- | :------------------------------ |
| item_id       | INT     | -    | ❌      | AUTO_INCREMENT | 主键，订单商品记录ID            |
| order_id      | INT     | -    | ❌      | -              | 订单ID，关联orders.order_id     |
| product_id    | INT     | -    | ❌      | -              | 商品ID，关联products.product_id |
| product_name  | VARCHAR | 100  | ❌      | -              | 商品名称快照                    |
| product_image | VARCHAR | 255  | ❌      | -              | 商品图片快照                    |
| price         | DECIMAL | 10,2 | ❌      | -              | 商品单价快照                    |
| quantity      | INT     | -    | ❌      | -              | 购买数量                        |
| subtotal      | DECIMAL | 10,2 | ❌      | -              | 小计金额                        |

**索引：wai**

- 主键：item_id
- 普通索引：order_id, product_id

### 分析

1. 用的是自增ID，可优化为UUID
2. 外键部分可优化